\documentclass[%draft,
    11pt, % use explicit paper size
    headinclude, footexclude,
    twoside, % this produces strange margins!
    openright, % for new chapters
    notitlepage,
    cleardoubleempty,
    headsepline,
    pointlessnumbers,
    bibtotoc, idxtotoc,
    ]{scrbook}


% that's for virtualbookworm trim size
%\setlength{\paperwidth}{6in} \setlength{\paperheight}{9in}
% that's for CreateSpace trim size
\setlength{\paperwidth}{7.5in} \setlength{\paperheight}{9.25in}
\usepackage{pslatex} % -- times instead of computer modern
% pslatex should be replaced by this:
%\usepackage{mathptmx}
%\usepackage[scaled=.70]{helvet}
%\usepackage{courier}
% pslatex does not work with T1 encoding. <> Problem?

% typeare{calc} without BCOR results to a DIV of 8 for 11pt
%\typearea[0.465in]{15}
% the decision is 14
\typearea[0.5in]{14}
%\typearea[0.535in]{13}
%\typearea[0.57in]{12}

% headings
\usepackage{scrpage2} % for headers
 \setkomafont{pagehead}{\scshape\small}
 \setkomafont{pagenumber}{\scshape\small}
 \automark[section]{chapter}
 \ohead[]{\pagemark}
 \chead[]{}
 \ihead[]{\headmark}
 \ofoot[]{} \cfoot[]{} \ifoot[]{}

%\tolerance=500 % to avoid lines sticking out into the margin
               % needed for 'high-performance' in Intro - contributions
\emergencystretch=2em
% or tol. to 500 and emerg. to 1em?
% pagebreak was ok with 500 and 1em
\interfootnotelinepenalty=10000


% use BCOR = (paperwidth-textwidth)/4
% A4: 210mm x 297mm
% B5: 176mm x 250mm
% Java book: 185mm x 232mm
% Engblom: 120x188 (without head)
% Java: 127x187 (without head)
% 1pt = 1/72.27 in = 0.351 mm
% Thesis is 232mm x 185mm (9,1in x 7,28in) with 11pt
% Springer is 9,2in x 6in with 10pt
% Altera Quaruts handbook is 9in x 7in with 9pt


% for book
% 'Java-format' 526pt x 660pt (Ghostscript)
%\setlength{\paperwidth}{185mm} \setlength{\paperheight}{232mm}
% use that BCOR setting with twoside to compensate the margin
%\areaset[13.75mm]{130mm}{200mm} % Java book format



% use 10pt for code instead of 11pt - but I still would prefer Lucida Typewriter
%\newfont{\myttfont}{cmss10 scaled 1000}
%\newfont{\myttbfont}{cmssdc10 scaled 1000}
%
% This IS Lucida Typewriter
%\newfont{\myttfont}{plsr8r scaled 950}
%\newfont{\myttbfont}{plsb8r scaled 950}
%\newfont{\myttifont}{plsro8r scaled 950}
%%\newfont{\mytttextfont}{plsr8r}

% Lucida is perhaps available in the new Tex installation!!!!
% does not really work!!!
%\newfont{\myttfont}{hlsrt8r scaled 950}
%\newfont{\myttbfont}{hlsbt8r scaled 950}
%\newfont{\myttifont}{hlsrot8r scaled 950}

% I used these .ttf for the official Thesis
%..\ttf2pt1 -e -b LucidaTypewriterRegular.ttf plsr8a
%..\ttf2pt1 -e -b LucidaTypewriterBold.ttf plsb8a
%..\ttf2pt1 -e -b LucidaTypewriterOblique.ttf plsro8a
%..\ttf2pt1 -e -b LucidaTypewriterBoldOblique.ttf plsbo8a

%\newcommand{\javatt}{\myttfont}
%\newcommand{\javattb}{\myttbfont}
%\newcommand{\javatti}{\myttifont}
%\newcommand{\javatext}{\myttfont}
%
%\newcommand{\picscale}{0.909}
%\newcommand{\excelwidth}{11cm}

% end book

% for B5
%\newfont{\javatt}{cmss10}
%\newfont{\javattb}{cmssdc10}
%\newcommand{\picscale}{0.833}
%\newcommand{\excelwidth}{10cm}


%% was set to 9 for the green book
%% should be ok with 11 for the orange book
%\newfont{\javatt}{cmss11}
%\newfont{\javattb}{cmssdc11}
%% TODO find an italic
%\newfont{\javatti}{cmss11}
%\newcommand{\javatext}{\javatt}

\newcommand{\picscale}{1}
\newcommand{\excelwidth}{12cm}

% for SimpCon description
\newcommand{\sign}[1]{{\code{#1}}}

% for chapter head without a number
% \renewcommand{\chaptermark}[1]{\def\myleftmark{#1}}
% \ihead{\myleftmark} \chead{} \ohead{{\rightmark}}

\setkomafont{captionlabel}{\sffamily\bfseries}

\usepackage{latexsym}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{longtable}
\usepackage{booktabs}

% I would need Lucida Console!!!
%
%\newfont{\javatt}{pltt12} % lucida teletype, better than normal but with serifs
%\newfont{\javatt}{plss12} % lucida no serifes, but variable spacing
%\newfont{\javatt}{plss10 scaled 1200}
%\newfont{\javattb}{plssdc10 scaled 1200}
% cmss is NOT a tt font....

\usepackage{listings}
%\lstset{language=Java,keywordstyle=,
%basicstyle=\small\javatt,emphstyle=\small\javattb,commentstyle=\small\javatti,
%%basicstyle=\small,
%%
%showstringspaces=false,captionpos=b,columns=flexible}
%%\lstset{basicstyle=\small,language=Java,columns=flexible}

\lstset{basicstyle=\sffamily\small,keywordstyle=\sffamily\small,language=Java,captionpos=b,columns=flexible,showstringspaces=false}

\usepackage{array}
\usepackage{dcolumn}
\newcommand{\cc}[1]{\multicolumn{1}{c}{#1}}
\newcolumntype{d}[1]{D{.}{.}{#1}}

\usepackage{capt-of}
\usepackage[colorlinks=true,urlcolor=black,linkcolor=black,citecolor=black]{hyperref}

% ----------------------

\usepackage{makeidx}
\makeindex


\usepackage{import} % for subimport text and graphics from subdirectory
% does not work with latex2html!


%\newcommand{\codefoot}{\textsf}
%\newcommand{\code}[1]{{\javatext#1}}
%\newcommand{\codeb}[1]{{\javattb#1}}

\newcommand{\codefoot}{\sffamily}
\newcommand{\code}[1]{{\small\sffamily{#1}}}


%\newcommand{\cmd}[1]{{\texttt{#1}}}
%\newcommand{\dirent}[1]{{\texttt{#1}}}
%\newcommand{\menuitem}[1]{\textsf{\textbf{#1}}}
\newcommand{\cmd}[1]{{\code{#1}}\index{#1}}
\newcommand{\cmdb}[1]{{\textsf{\textbf{#1}}}\index{#1}}
\newcommand{\dirent}[1]{{\code{#1}}}
\newcommand{\menuitem}[1]{\textsf{\textsl{#1}}}

\newcommand{\idx}[1]{#1\index{#1}}

% for flow.tex - part of index helper
\newcommand{\eei}[1]{%
\index{extension!\texttt{#1}}\texttt{#1}}

% JVs et al
%\newcommand{\ea}{et al.\xspace}
\newcommand{\ea}{et al.\ }

% used in GC period calculation
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}

%\begin{htmlonly}
%\renewcommand{\code}[1]{{\texttt{#1}}} % for html2LaTeX
%\newcommand{\toprule}{\hline}
%\newcommand{\midrule}{\hline}
%\newcommand{\bottomrule}{\hline}
%\end{htmlonly}

% net wirklich notwendig -- hängt von code generierung ab
%\begin{htmlonly}
%\renewcommand{\javatt}{\texttt}
%\renewcommand{\javattb}{\texttt\bfseries}
%\end{htmlonly}

%\code{\hyphenchar\font=-1}

\newcommand{\mycomment}[1]{}

\newcommand{\instr}[6]{
    \begin{table}
    \index{microcode!{\textsf{#1}}}
        \begin{tabular}{ll}
            \emph{\large\textbf{#1}} & \\
            \\ \\
            \textbf{Operation} & #2 \\ \\
            \textbf{Opcode} & \texttt{#3} \\ \\
            \textbf{Dataflow} & \parbox[t]{10.5cm}{\(#4\)}\\ \\
            \textbf{JVM equivalent} & \parbox[t]{10.5cm}{\code{#5}} \\ \\
            \textbf{Description} & \parbox[t]{10.5cm}{#6}\\
        \end{tabular}
    \end{table}
}
